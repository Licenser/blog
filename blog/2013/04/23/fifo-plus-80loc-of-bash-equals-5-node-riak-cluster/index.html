
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>FiFo + 80LOC of Bash = 5 Node Riak Cluster - Lice!</title>
  <meta name="author" content="Heinz N. 'Licenser' Gies">

  
  <meta name="description" content="The reason The question &lsquo;why would I want at least 5 nodes&rsquo; comes up very often in the #riak IRC channel, there is a good explanation. &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://blog.licenser.net/blog/2013/04/23/fifo-plus-80loc-of-bash-equals-5-node-riak-cluster">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Lice!" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-31493882-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Lice!</a></h1>
  
    <h2>...</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:blog.licenser.net" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">FiFo + 80LOC of Bash = 5 Node Riak Cluster</h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-04-23T14:47:00+02:00" pubdate data-updated="true">Apr 23<span>rd</span>, 2013</time>
        
      </p>
    
  </header>


<div class="entry-content"><h2>The reason</h2>

<p>The question &lsquo;why would I want at least 5 nodes&rsquo; comes up very often in the #riak IRC channel, there is a <a href="http://basho.com/why-your-riak-cluster-should-have-at-least-five-nodes/">good explanation</a>. But that&rsquo;s boring, no one likes reading manuals, we, as engineers, like to try things out (aka. break stuff).</p>

<p>Only downside with that is that we need to set things up before we can break them, or even worst need to un-break it later to try out different things (aka. break it in different ways). Admittedly setting up a riak instance is <strong>easy</strong> but setting up 5 and connecting them then break them and do all again to break them again, ermâ€¦ I mean try things out of cause, can get really tedious and I for once am too lazy to bother with that.</p>

<h2>The goal</h2>

<p>Make setting our breakage, erm test, bed setup as simple as possible, and whipping up things and tearing them down trivial, ideally have one simple command like <code>./riak.sh setup</code> to do that for us and <code>./riak.sh delete</code> undo it all for us to get back to a clean state.</p>

<h2>The tools</h2>

<p>To build anything we&rsquo;ll need some tools, hammer and nails will not do us much good here so we are going to pick:</p>

<ul>
<li><a href="http://project-fifo.net">Project FiFo</a> &ndash; my favourite virtualisation tool (I am biassed I wrote it), but it&rsquo;s very easy to set up and very powerful.</li>
<li><a href="https://github.com/project-fifo/pyfi">The FiFo Console Client</a> &ndash; we want to script things, a UI isn&rsquo;t helpful.</li>
<li>bash &ndash; the simplest possible scripting tool.</li>
<li>curl &ndash; since riak offers a http fronted it&rsquo;s a wonderful way to check if the system is up.</li>
<li><a href="http://trentm.com/json/">jsontool</a> &ndash; a nifty utility to traverse JSON documents.</li>
</ul>


<p>With that we should be set and good to go.</p>

<h2>The steps</h2>

<p>We&rsquo;ll have to perform multiple steps to build our wracking ground for riak lets look at them one by one:</p>

<h3>Preparing the environment</h3>

<p>Before we can begin we&rsquo;ve to set up a few things, I&rsquo;ll not go into detail how to set up FiFo, there is a [good manual] for that with only like 5 steps required. So lets start at some of the script&rsquo;s variables:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="c">#/usr/bin/env bash</span>
</span><span class='line'><span class="nv">PACKAGE</span><span class="o">=</span><span class="s2">&quot;small&quot;</span>
</span><span class='line'><span class="nv">DATASET</span><span class="o">=</span><span class="s2">&quot;base64-1.9.1&quot;</span>
</span><span class='line'><span class="nv">NET</span><span class="o">=</span><span class="s2">&quot;7df94bc3-6a9f-4c88-8f80-7a8f4086b79d&quot;</span>
</span></code></pre></td></tr></table></div></figure>


<ul>
<li><code>smal</code> is the name of the package created in FiFo, I picked something with 512MB of memory since that should be enough for now.</li>
<li><code>base64-1.9.1</code> is the dataset it means things are running in a solaris zone this also can be installed from the FiFo UI.</li>
<li><code>7df94bc3-6a9f-4c88-8f80-7a8f4086b79d</code> is the UUID of the network you can find that with <code>fifo networks list</code></li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>schroedinger:fifopy heinz <span class="o">[</span>master<span class="o">]</span> <span class="nv">$ </span>fifo packages list
</span><span class='line'>                                UUID Name       RAM        CPU cap    Quota
</span><span class='line'>------------------------------------ ---------- ---------- ---------- ----------
</span><span class='line'>5f9f6c41-d700-4b4f-80f1-7350a71ed2e6 small      512 MB     100%       10 GB
</span><span class='line'>schroedinger:fifopy heinz <span class="o">[</span>master<span class="o">]</span> <span class="nv">$ </span>fifo networks list
</span><span class='line'>                                UUID Name       Tag                  First            Last
</span><span class='line'>------------------------------------ ---------- ---------- --------------- ---------------
</span><span class='line'>7df94bc3-6a9f-4c88-8f80-7a8f4086b79d <span class="nb">test       </span>admin        192.168.0.210   192.168.0.220
</span><span class='line'>schroedinger:fifopy heinz <span class="o">[</span>master<span class="o">]</span> <span class="nv">$ </span>fifo datasets list
</span><span class='line'>                                UUID Name       Version Type  Description
</span><span class='line'>------------------------------------ ---------- ------- ----- ----------
</span><span class='line'>60ed3a3e-92c7-11e2-ba4a-9b6d5feaa0c4 base       1.9.1   zone  A SmartOS ...
</span></code></pre></td></tr></table></div></figure>


<h3>Creating a VM with riak installed</h3>

<p>Creating a VM is rather simple we need a little JSON and pipe it to fifo with a cat. Please note the section reading <code>user-script</code> here we make the setup. Here is how it looks.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>cat <span class="s">&lt;&lt;EOF | fifo vms create -p $PACKAGE -d $DATASET</span>
</span><span class='line'><span class="s">{</span>
</span><span class='line'><span class="s">  &quot;alias&quot;: &quot;riak1&quot;,</span>
</span><span class='line'><span class="s">  &quot;networks&quot;: {&quot;net0&quot;: &quot;$NET&quot;},</span>
</span><span class='line'><span class="s">  &quot;metadata&quot;: {&quot;user-script&quot;: &quot;/opt/local/bin/sed -i.bak \\&quot;s/pkgsrc/pkgsrc-eu-ams/\\&quot; /opt/local/etc/pkgin/repositories.conf; /opt/local/bin/pkgin update; /opt/local/bin/pkgin -y install riak; export IP=\`ifconfig net0 | head -n 2 | tail -n 1 | awk &#39;{print \$2}&#39;\`; /opt/local/bin/sed -i.bak \\&quot;s/127.0.0.1/\$IP/\\&quot; /opt/local/etc/riak/app.config; /opt/local/bin/sed -i.bak \\&quot;s/127.0.0.1/\$IP/\\&quot; /opt/local/etc/riak/vm.args; svcadm enable epmd riak&quot;}</span>
</span><span class='line'><span class="s">}</span>
</span><span class='line'><span class="s">EOF</span>
</span></code></pre></td></tr></table></div></figure>


<p>To get a bit better look user script section and remove the escape things:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="c"># We configure pkgin to use the european mirror you might not need to do that.</span>
</span><span class='line'>/opt/local/bin/sed -i.bak <span class="s2">&quot;s/pkgsrc/pkgsrc-eu-ams/&quot;</span> /opt/local/etc/pkgin/repositories.conf;
</span><span class='line'><span class="c"># We update the pkgin database and install riak</span>
</span><span class='line'>/opt/local/bin/pkgin update;
</span><span class='line'>/opt/local/bin/pkgin -y install riak;
</span><span class='line'><span class="c"># We find out what IP our VM has from within the VM.</span>
</span><span class='line'><span class="nb">export </span><span class="nv">IP</span><span class="o">=</span><span class="sb">`</span>ifconfig net0 | head -n 2 | tail -n 1 | awk <span class="s1">&#39;{print $2}&#39;</span><span class="sb">`</span>;
</span><span class='line'><span class="c"># We update the app.config and vm.args to use the &#39;public&#39; ip instead of the 127.0.0.1</span>
</span><span class='line'>/opt/local/bin/sed -i.bak <span class="s2">&quot;s/127.0.0.1/$IP/&quot;</span> /opt/local/etc/riak/app.config;
</span><span class='line'>/opt/local/bin/sed -i.bak <span class="s2">&quot;s/127.0.0.1/$IP/&quot;</span> /opt/local/etc/riak/vm.args;
</span><span class='line'><span class="c"># Start epmd and riak</span>
</span><span class='line'>svcadm <span class="nb">enable </span>epmd riak
</span></code></pre></td></tr></table></div></figure>


<h3>Waiting for riak</h3>

<p>Now that is the first zone set up next we&rsquo;ll want to wait for riak to properly start up. This is needed since the commands are asynchronous and installing the packages can be a tad slow. But we can just to curl the http interface to check for this, so it&rsquo;s rather simple:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="c"># We&#39;ll ask fifo for the IP of our first zone.</span>
</span><span class='line'><span class="nv">IP1</span><span class="o">=</span><span class="sb">`</span>fifo vms get riak1 | json networks<span class="o">[</span>0<span class="o">]</span>.ip<span class="sb">`</span>
</span><span class='line'><span class="c"># Print some info so waiting is not so boring</span>
</span><span class='line'><span class="nb">echo</span> -n <span class="s1">&#39;Waiting until riak is up and running on the primary node.&#39;</span>
</span><span class='line'><span class="c"># now we curl the http interface every second to see if things are good.</span>
</span><span class='line'><span class="k">until </span>curl http://<span class="k">${</span><span class="nv">IP1</span><span class="k">}</span>:8098 2&gt;/dev/null &gt;/dev/null
</span><span class='line'><span class="k">do</span>
</span><span class='line'><span class="k">  </span>sleep 1
</span><span class='line'>  <span class="nb">echo</span> -n <span class="s1">&#39;.&#39;</span>
</span><span class='line'><span class="k">done</span>
</span><span class='line'><span class="c"># and we&#39;re done!</span>
</span><span class='line'><span class="nb">echo</span> <span class="s2">&quot; done.&quot;</span>
</span></code></pre></td></tr></table></div></figure>


<h3>Setting up the remaining zones</h3>

<p>We&rsquo;re not going to get into too much details with this since it is pretty much working the same as the first VM with the only difference that the user-script holds two more lines:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="k">for </span>i in 2 3 4 5
</span><span class='line'><span class="k">do</span>
</span><span class='line'><span class="k">  </span>cat <span class="s">&lt;&lt;EOF | fifo vms create -p $PACKAGE -d $DATASET</span>
</span><span class='line'><span class="s">  {</span>
</span><span class='line'><span class="s">    &quot;alias&quot;: &quot;riak${i}&quot;,</span>
</span><span class='line'><span class="s">    &quot;networks&quot;: {&quot;net0&quot;: &quot;$NET&quot;},</span>
</span><span class='line'><span class="s">    &quot;metadata&quot;: {&quot;user-script&quot;: &quot;/opt/local/bin/sed -i.bak \\&quot;s/pkgsrc/pkgsrc-eu-ams/\\&quot; /opt/local/etc/pkgin/repositories.conf; /opt/local/bin/pkgin update; /opt/local/bin/pkgin -y install riak; export IP=\`ifconfig net0 | head -n 2 | tail -n 1 | awk &#39;{print \$2}&#39;\`; /opt/local/bin/sed -i.bak \\&quot;s/127.0.0.1/\$IP/\\&quot; /opt/local/etc/riak/app.config; /opt/local/bin/sed -i.bak \\&quot;s/127.0.0.1/\$IP/\\&quot; /opt/local/etc/riak/vm.args; svcadm enable epmd riak; sleep 10; /opt/local/bin/sudo -uriak /opt/local/sbin/riak-admin cluster join riak@${IP1}; /opt/local/bin/sudo -uriak /opt/local/sbin/riak-admin cluster plan; /opt/local/bin/sudo -uriak /opt/local/sbin/riak-admin cluster commit&quot;}</span>
</span><span class='line'><span class="s">  }</span>
</span><span class='line'><span class="s">EOF</span>
</span><span class='line'>  <span class="nv">IP</span><span class="o">=</span><span class="sb">`</span>fifo vms get riak<span class="nv">$i</span> | json networks<span class="o">[</span>0<span class="o">]</span>.ip<span class="sb">`</span>
</span><span class='line'>  <span class="nb">echo</span> -n <span class="s2">&quot;Waiting untill riak is up and running on the node $i.&quot;</span>
</span><span class='line'>  <span class="k">until </span>curl http://<span class="k">${</span><span class="nv">IP</span><span class="k">}</span>:8098 2&gt;/dev/null &gt;/dev/null
</span><span class='line'>  <span class="k">do</span>
</span><span class='line'><span class="k">      </span>sleep 1
</span><span class='line'>      <span class="nb">echo</span> -n <span class="s1">&#39;.&#39;</span>
</span><span class='line'>  <span class="k">done</span>
</span><span class='line'><span class="k">  </span><span class="nb">echo</span> <span class="s2">&quot; done.&quot;</span>
</span><span class='line'>
</span><span class='line'><span class="k">done</span>
</span></code></pre></td></tr></table></div></figure>


<p>The two new lines are joining the node to the existing riak node which is quite easy, we can use $IP1 we generated in the first step too:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>/opt/local/bin/sudo -uriak /opt/local/sbin/riak-admin cluster join riak@<span class="k">${</span><span class="nv">IP1</span><span class="k">}</span>
</span><span class='line'>/opt/local/bin/sudo -uriak /opt/local/sbin/riak-admin cluster plan
</span><span class='line'>/opt/local/bin/sudo -uriak /opt/local/sbin/riak-admin cluster commit
</span></code></pre></td></tr></table></div></figure>


<p>This is run that up and you&rsquo;ve a 5 node riak cluster, and it&rsquo;s quick at last if you&rsquo;re in the US and have a good connection to the package repository.</p>

<p><a href="https://raw.github.com/project-fifo/pyfi/master/examples/riak.sh">Here</a> is this all slapped together.</p>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Heinz N. 'Licenser' Gies</span></span>

      








  


<time datetime="2013-04-23T14:47:00+02:00" pubdate data-updated="true">Apr 23<span>rd</span>, 2013</time>
      

<span class="categories">
  
    <a class='category' href='/blog/categories/project-fifo/'>Project-FiFo</a>, <a class='category' href='/blog/categories/riak/'>riak</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  <a href="//twitter.com/share" class="twitter-share-button" data-url="http://blog.licenser.net/blog/2013/04/23/fifo-plus-80loc-of-bash-equals-5-node-riak-cluster/" data-via="heinz_gies" data-counturl="http://blog.licenser.net/blog/2013/04/23/fifo-plus-80loc-of-bash-equals-5-node-riak-cluster/" >Tweet</a>
  
  
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/2013/04/09/writing-your-first-riak-test-test-yes-i-know-there-are-two-tests-there/" title="Previous Post: Writing your first riak test test (yes I know there are two tests there)">&laquo; Writing your first riak test test (yes I know there are two tests there)</a>
      
      
        <a class="basic-alignment right" href="/blog/2013/05/06/happy-birthday-project-fifo/" title="Next Post: Happy birthday Project FiFo">Happy birthday Project FiFo &raquo;</a>
      
    </p>
  </footer>
</article>

  <section>
    <h1>Comments</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
  </section>

</div>

<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2014/11/28/postmortem-of-a-interesting-bug/">Postmortem of a Interesting Bug</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/02/02/post-mortem-of-a-failed-support-case/">Post-mortem of a Failed Support Case.</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/01/01/backups-with-project-fifo/">Backups With Project FiFo</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/06/13/a-asynchronous-gced-or-set/">A Asynchronously GCed or Set</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/06/11/asyncronous-garbage-collection-with-crdts/">Asynchronous Garbage Collection With CRDTs</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating...</li>
  </ul>
  
  <a href="https://github.com/Licenser">@Licenser</a> on GitHub
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'Licenser',
            count: 0,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>





  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2014 - Heinz N. 'Licenser' Gies -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'lice';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://blog.licenser.net/blog/2013/04/23/fifo-plus-80loc-of-bash-equals-5-node-riak-cluster/';
        var disqus_url = 'http://blog.licenser.net/blog/2013/04/23/fifo-plus-80loc-of-bash-equals-5-node-riak-cluster/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
